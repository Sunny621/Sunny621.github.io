<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Drag Me</title>
    <style>
        div {
            width: 80px;
            height: 80px;
            position: absolute;
            background: url('./img/ali.png');
            background-size: cover;
        }
    </style>
</head>

<body>
    <div id="box">
    </div>
    <script>
        let box = document.querySelector('#box');

        box.addEventListener('mousedown', function(e) {
            let startX = e.clientX;
            let startY = e.clientY;

            let originL = box.offsetLeft;
            let originT = box.offsetTop;

            document.addEventListener('mousemove', moveFn)

            function moveFn(e) {
                let nowX = e.clientX;
                let nowY = e.clientY;

                let disX = nowX - startX;
                let disY = nowY - startY;

                let newX = disX + originL;
                let newY = disY + originT;

                if (newX < 0) {
                    newX = 0;
                }
                if (newY < 0) {
                    newY = 0;
                }
                let maxX = document.documentElement.clientWidth - box.offsetWidth;
                let maxY = document.documentElement.clientHeight - box.offsetHeight;

                if (newX > maxX) {
                    newX = maxX;
                }
                if (newY > maxY) {
                    newY = maxY;
                }

                box.style.left = newX + 'px';
                box.style.top = newY + 'px';
            }

            document.addEventListener('mouseup', function() {
                document.removeEventListener('mousemove', moveFn);
            })

        })
    </script>
</body>

</html>